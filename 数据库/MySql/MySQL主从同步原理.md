# MySQL 主从同步机制

MySQL 主从同步基于二进制日志（binlog），整个过程分为三个阶段：

1. **主库记录日志**  
   主库执行写操作时，将变更记录写入二进制日志（binlog）。

2. **从库获取日志**  
   从库的 I/O 线程连接主库，实时读取 binlog，并将其写入本地的中继日志（relay log）。

3. **从库回放日志**  
   从库的 SQL 线程读取中继日志，按顺序执行其中的 SQL 语句，从而使从库数据保持与主库一致。

---

## 主从同步的三种复制模式

- **基于语句复制（Statement-based Replication）**  
  复制执行的 SQL 语句。

- **基于行复制（Row-based Replication）**  
  复制数据变更的具体行。

- **混合模式复制（Mixed Replication）**  
  根据情况自动选择基于语句或基于行复制模式。

默认使用 **基于行复制模式（Row）**，以确保数据的一致性和准确性。
